{
  "rules": {

    "queue": {

    },

    "players": {
      "$playerID": {
        ".read": "true",
        ".write": "auth != null && auth.uid === $playerID",
        /*"mask": { ".validate": "newData.isString()" },*/
        "$other": { ".validate": "false" },
      },
    },

    "playerFriends": {
      "$playerID": {
        ".read": "auth != null && auth.uid === $playerID",
        ".write": "auth != null && auth.uid === $playerID",
        "$friendID": {
          ".validate": "
               root.child('players').hasChild($friendID)
            && newData.isBoolean()
          ",
        },
      },
    },

    "games": {
      "$gameID": {
        ".read": "true",
        ".write": "auth != null && auth.uid === $gameID", /* && newData.exists() */
        "started": { ".validate": "newData.isBoolean()" },
        "teams": {
          "$teamID": {
            ".validate": "$teamID === '1' || $teamID === '2'",
            "$playerID": {
              ".validate": "
                   !newData.exists()
                || root.child('games').child($gameID).child('started').val() != true
                && root.child('players').hasChild($playerID)
                && root.child('gameTeamRequests').child($gameID).child($teamID).hasChild($playerID)
                && newData.isBoolean()
              ",
              "$other": { ".validate": "false" },
            },
          },
        },
        "$other": { ".validate": "false" },
      },
    },

    "gameTeamRequests": {
      "$gameID": {
        ".read": "auth != null && auth.uid === $gameID",
        ".write": "auth != null",
        "$teamID": {
          ".validate": "$teamID === 1 || $teamID === 2",
          "$playerID": {
            ".validate": "
                 auth != null && auth.uid === $playerID
              && !data.parent().parent().child('1').hasChild($playerID)
              && !data.parent().parent().child('2').hasChild($playerID)
              && newData.isBoolean()
            ",
            "$other": { ".validate": "false" },
          },
        },
      },
    },

    "gamePlayers": {
      "$gameID": {
        ".read": "true",
        "$playerID": {
          /* && (not stealthed || auth.uid === $playerID || is teammate) */
          /*"stealthed": { ".validate": "newData.isBoolean()" },*/
          /*"downed": { ".validate": "newData.isBoolean()" },*/
          /*"gear": {
            "$item": {},
          },*/
        }
      },
    },

    "gameInventories": {
      "$gameID": {
        ".read": "true",
        "$playerID": {
          /* && (auth.uid === $playerID || is teammate) */
          /*"$item": {
            "used": { ".validate": "newData.isBoolean()" },
          },*/
        },
      },
    },

    "gameStatuses": {
      "$gameID": {
        ".read": "true",
        /*"turn": { ".validate": "newData.isNumber()" },*/
        /*"turnStarted": { ".validate": "newData.isNumber()" },*/
        /*"turnOf": { ".validate": "newData.isNumber()" },*/
      },
    },

  },
}
